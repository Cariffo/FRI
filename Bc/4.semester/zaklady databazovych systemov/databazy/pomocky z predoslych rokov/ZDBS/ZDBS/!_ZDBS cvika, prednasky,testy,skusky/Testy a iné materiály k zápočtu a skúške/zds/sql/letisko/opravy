ALTER TABLE LETENKAS ADD (CONSTRAINT
 LET_LIE_FK FOREIGN KEY
  (LIE_ID) REFERENCES LIETADLOS
  (ID))


ALTER TABLE LETENKAS ADD (CONSTRAINT
 LET_LTM_FK FOREIGN KEY
  (LTM_ID) REFERENCES LIETADLO_TYP_MIESTAS
  (ID))

CREATE INDEX LET_LTM_FK_I ON LETENKAS
 (LTM_ID)


CREATE INDEX LET_LIE_FK_I ON LETENKAS
 (LIE_ID)

-------------------------------------------


ALTER TABLE LETENKAS drop CONSTRAINT LET_LIE_FK;

ALTER TABLE LETENKAS drop CONSTRAINT LET_LTM_FK;

DROP INDEX LET_LTM_FK_I;

DROP INDEX LET_LIE_FK_I;

ALTER TABLE LETENKAS drop (LIE_ID);

ALTER TABLE LETENKAS drop (LTM_ID);

--------------------------------------------
--------------------------------------------

ALTER TABLE LETENKA_LETIES ADD (CONSTRAINT
 LL_LET_FK FOREIGN KEY
  (LET_ID) REFERENCES LETENKAS
  (ID))


ALTER TABLE LETENKA_LETIES ADD (CONSTRAINT
 LL_LET1_FK FOREIGN KEY
  (LET1_CISLO) REFERENCES LETIES
  (CISLO))

CREATE TABLE LETENKA_LETIES
 (CENA INTEGER NOT NULL
 ,LET_ID INTEGER NOT NULL
 ,LET1_CISLO INTEGER NOT NULL
 )

CREATE TABLE LIETADLO_TYP_MIESTAS
 (ID INTEGER NOT NULL
 ,ULICKA INTEGER NOT NULL
 ,OKNO INTEGER NOT NULL
 ,STRED INTEGER NOT NULL
 ,C_MIESTA INTEGER NOT NULL
 ,TL_ID INTEGER NOT NULL
 ,TM_ID INTEGER NOT NULL
 )

CREATE INDEX LL_LET1_FK_I ON LETENKA_LETIES
 (LET1_CISLO)


CREATE INDEX LL_LET_FK_I ON LETENKA_LETIES
 (LET_ID)

-------------------------------------------

ALTER TABLE LETENKA_LETIES ADD (LTM_ID INTEGER NOT NULL); 

CREATE INDEX LL_LTM_FK_I ON LETENKA_LETIES (LTM_ID);

ALTER TABLE LETENKA_LETIES ADD CONSTRAINT LL_LTM_FK FOREIGN KEY (LTM_ID)
REFERENCES LIETADLO_TYP_MIESTAS (ID);

-------------------------------------------
-------------------------------------------

CREATE TABLE LETISKOS
 (POPLATKY INTEGER NOT NULL
 ,TEL_CISLO INTEGER NOT NULL
 ,KOD VARCHAR2(15) NOT NULL
 ,NAZOV VARCHAR2(20) NOT NULL
 )

ALTER TABLE LETIES ADD (CONSTRAINT
 LET1_PLK_FK FOREIGN KEY
  (PRILET_LETISKO_KOD) REFERENCES LETISKOS
  (KOD))

ALTER TABLE LETIES ADD (CONSTRAINT
 LET1_OLK_FK FOREIGN KEY
  (ODLET_LETISKO_KOD) REFERENCES LETISKOS
  (KOD))

CREATE INDEX LET1_LET2_FK_I ON LETIES
 (PRILET_LETISKO_KOD)

CREATE INDEX LET1_LET2_FK_II ON LETIES
 (ODLET_LETISKO_KOD)

------------------------------------------

CREATE TABLE TRASY
 (ID INTEGER NOT NULL
 ,ODKIAL VARCHAR2(20) NOT NULL
 ,KAM VARCHAR2(20) NOT NULL
 );

CREATE INDEX T_O_FK_I ON TRASY (ODKIAL);

CREATE INDEX T_K_FK_I ON TRASY (KAM);

ALTER TABLE TRASY ADD CONSTRAINT T_O_FK FOREIGN KEY (ODKIAL)
REFERENCES LETISKOS (KOD);

ALTER TABLE TRASY ADD CONSTRAINT T_K_FK FOREIGN KEY (KAM) REFERENCES
LETISKOS (KOD);

ALTER TABLE TRASY ADD CONSTRAINT T_PK primary key (ID);

------------------------------------------
CREATE TABLE TRASY_ZLOZENIE
 (TRASA_ID INTEGER NOT NULL
 ,LETISKO_KOD VARCHAR2(15) NOT NULL
 ,PORADIE INTEGER NOT NULL
 );

CREATE INDEX TZ_K_FK_I ON TRASY_ZLOZENIE (LETISKO_KOD);

CREATE INDEX TZ_TID_FK_I ON TRASY_ZLOZENIE (TRASA_ID);

ALTER TABLE TRASY_ZLOZENIE ADD
CONSTRAINT TZ_K_FK FOREIGN KEY (LETISKO_KOD) REFERENCES LETISKOS (KOD);

ALTER TABLE TRASY_ZLOZENIE ADD CONSTRAINT TZ_TID_FK FOREIGN KEY (TRASA_ID)
REFERENCES TRASY (ID);

