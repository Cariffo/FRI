VNC server
-VNC server bude v LXC kontajneri
-musime mat otvoreny port 5901 resp. rozsah od 5900-5903, aby sme aj nieco videli :)
-vnc bude nstalovat graficke prostredie - XFCE je nenarocne na zdroje

INSTALACIA
-----------------------------------
SERVER
  sudo apt-get install tightvncserver xvfb xfce4

KLIENT
  sudo apt-get install xtightvncviewer


KONFIGURACIA
-------------------------------------
SERVER
0) Uistime sa, ze sme prihlaseny ako bezny pouzivatel. Spustanie 
1) Spustime vnc server:

  tightvncserver

Zobrazi sa cislo obrazovky, ktore si vnc server vybral.

2) Zadame heslo, ktorym sa bude vnc klient pripajat na vnc server. Po zadani hesla sa spusti proces a vytvori sa adresar ".vnc".

3) otvorime nizsie uvedeny subor

  vim ~/.vnc/xstartup

4) Upravime ho nasledovne (pridal som iba na zaciatok suboru "startxfce4", aby sa rozbehlo desktopove prostredie pri pripojeni vnc klienta):


#!/bin/sh

startxfce4 &
xrdb $HOME/.Xresources
xsetroot -solid grey
#x-terminal-emulator -geometry 80x24+10+10 -ls -title "$VNCDESKTOP Desktop" &
#x-window-manager &
# Fix to make GNOME work
export XKL_XMODMAP_DISABLE=1
/etc/X11/Xsession


5) Upravime subor "xstartup", ktory sa spusta pri pripojeni vnc klienta. Pokial sme uz spustili tightvncserver, 
  
  chmod +x ~/.vnc/xstartup

6) nasledne restartujeme tightvncserver

  tightvncserver -kill :0
  tightvncserver -kill :1
  tightvncserver -kill :2
  tightvncserver




POUZIVANIE
-------------------------------------
SERVER
  # vytvorime virtualny buffer, do ktoreho sa bude 60 krat za sekundu ukladat obraz virtualnej obrazovky
  Xvfb :0 -screen 0 1024x768x16 -ac &
  
  # spustime virtualnu obrazovku
  DISPLAY=:0 exec startxfce4 &

  # spustenie VNC servera
  tightvncserver

  # skontrolujeme port, na ktorom tightvncserver pocuva
  # hladat nieco v zmysle "Xtightvnc"
  # napr.:
  # tcp        0      0 0.0.0.0:5901            0.0.0.0:*               LISTEN      6818/Xtightvnc
  # vidime, ze tightvncserver pocuva na porte 5901
  netstat -plant

  # ked chceme vediet cislo displeja, na ktory Xvfb vykresluje
  ps -ef|grep Xvfb

KLIENT
  # pripojenie klienta ku VNC serveru
  xtightvncviewer 158.193.152.45:5901

resp.

    xtightvncviewer <ip_vnc_server>:590X

kde X je cislo vnc obrazovky.

SERVER
  # vypnutie VNC servera
  tightvncserver -kill :1



Zdroje:
http://www.penguintutor.com/linux/tightvnc
http://ghanima.net/doku.php?id=wiki:ghanima:vncservercontainer
http://stackoverflow.com/questions/2138131/how-to-get-xvfb-display-number
http://onkea.com/ubuntu-vnc-grey-screen/
https://www.youtube.com/watch?v=Ez8vuAfTFnU&t=20s


Dalsie netestovane tutorialy:
https://github.com/j7an/QNAP-LXC-Cloud9/wiki/Upgrading-LXC-Container-to-Full-Desktop-Distribution-with-VNC
https://www.kaltpost.de/?page_id=84